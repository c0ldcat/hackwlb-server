<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title id="site-title">一段判断浏览器是否支持WebP的js代码 | ccat3z's blog</title><link rel="icon" href="/favicon.png"><title>一段判断浏览器是否支持WebP的js代码 | ccat3z’s blog</title><meta name="generator" content="Jekyll v3.8.5"><meta property="og:title" content="一段判断浏览器是否支持WebP的js代码"><meta name="author" content="ccat3z"><meta property="og:locale" content="en_US"><meta name="description" content="转自一段判断浏览器是否支持WebP的js代码 原作者: 关爱单身狗成长协会"><meta property="og:description" content="转自一段判断浏览器是否支持WebP的js代码 原作者: 关爱单身狗成长协会"><link rel="canonical" href="//ccat3z.xyz/posts/test-support-of-webp/"><meta property="og:url" content="//ccat3z.xyz/posts/test-support-of-webp/"><meta property="og:site_name" content="ccat3z’s blog"><meta property="og:type" content="article"><meta property="article:published_time" content="2017-08-30T12:25:36+08:00"><script type="application/ld+json">{"description":"转自一段判断浏览器是否支持WebP的js代码 原作者: 关爱单身狗成长协会","@type":"BlogPosting","url":"//ccat3z.xyz/posts/test-support-of-webp/","headline":"一段判断浏览器是否支持WebP的js代码","dateModified":"2017-08-30T12:25:36+08:00","datePublished":"2017-08-30T12:25:36+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"//ccat3z.xyz/posts/test-support-of-webp/"},"author":{"@type":"Person","name":"ccat3z"},"@context":"http://schema.org"}</script><link href="https://cdn.bootcss.com/material-design-icons/3.0.1/iconfont/material-icons.css" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/vuetify@1.5.5/dist/vuetify.min.css" rel="stylesheet"><link href="/css/blog.820ce6f1af5b0b5518ca.css" rel="stylesheet"></head><body><div id="blog"></div><div id="blog-data"><div id="blog-data-content"><div class="post"><div class="post-info"><a href="/posts/test-support-of-webp/" class="post-title">一段判断浏览器是否支持WebP的js代码 </a><span class="post-date">30 Aug 2017</span><p class="post-short-description">讲真为什么大家都不支持WebP...</p><ul class="post-tags"><li><a href="/tag/web" class="post-tag">Web</a></li></ul></div><div class="content"><blockquote><p>转自<a href="http://www.jianshu.com/p/cf60ad18c1c6">一段判断浏览器是否支持WebP的js代码</a> 原作者: 关爱单身狗成长协会</p></blockquote><div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">window</span><span class="p">.</span><span class="nx">isSupportWebp</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span><span class="c1">//是否支持</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">img</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">();</span> 
    <span class="kd">function</span> <span class="nx">getResult</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//如果进入加载且图片宽度为1(通过图片宽度值判断图片是否可以显示)</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">isSupportWebp</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">'load'</span> <span class="p">?</span> <span class="nx">img</span><span class="p">.</span><span class="nx">width</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">:</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">img</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">getResult</span><span class="p">;</span>
    <span class="nx">img</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">getResult</span><span class="p">;</span>
    <span class="nx">img</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">'data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA='</span><span class="p">;</span> <span class="c1">//一像素图片</span>
<span class="p">})();</span>
</code></pre></div></div></div></div></div><div id="blog-data-page-pagination"></div><div id="blog-data-nav"><ul><li><a href="/" class="icon-home">home</a></li><li><a href="/posts/" class="icon-create">post</a></li><li><a href="/projects/" class="icon-code">projects</a></li><li><a href="/tags/" class="icon-bookmark">tags</a></li><li><a href="/love/" class="icon-favorite">love</a></li></ul></div></div><script src="https://cdn.jsdelivr.net/npm/@babel/polyfill@7.2.5/dist/polyfill.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2.6.8/dist/vue.runtime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vuetify@1.5.5/dist/vuetify.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="/js/blog.820ce6f1af5b0b5518ca.js"></script></body></html>